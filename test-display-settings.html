<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>測試顯示設定</title>
    <script src="js/api.js"></script>
</head>
<body>
    <h1>測試顯示設定</h1>
    <div id="output"></div>
    
    <script>
        async function testDisplaySettings() {
            const output = document.getElementById('output');
            
            try {
                // 測試 API 設定
                const response = await fetch('/api/settings');
                const settings = await response.json();
                
                output.innerHTML = '<h2>API 返回的設定：</h2>';
                output.innerHTML += '<pre>' + JSON.stringify(settings, null, 2) + '</pre>';
                
                // 轉換為前端格式
                const displaySettings = {
                    showName: settings.show_name === true,
                    showBreed: settings.show_breed === true,
                    showDescription: settings.show_description === true,
                    showAge: settings.show_age === true,
                    showGender: settings.show_gender === true,
                    showPrice: settings.show_price === true,
                    showHealth: settings.show_health === true,
                    showColor: settings.show_color === true
                };
                
                output.innerHTML += '<h2>轉換後的顯示設定：</h2>';
                output.innerHTML += '<pre>' + JSON.stringify(displaySettings, null, 2) + '</pre>';
                
                // 特別檢查 showBreed 和 showColor
                output.innerHTML += '<h2>關鍵設定檢查：</h2>';
                output.innerHTML += `<p>品種顯示 (showBreed): ${displaySettings.showBreed}</p>`;
                output.innerHTML += `<p>毛色顯示 (showColor): ${displaySettings.showColor}</p>`;
                
            } catch (error) {
                output.innerHTML = '<p style="color: red;">錯誤：' + error.message + '</p>';
            }
        }
        
        // 頁面載入時執行測試
        testDisplaySettings();
    </script>
</body>
</html>